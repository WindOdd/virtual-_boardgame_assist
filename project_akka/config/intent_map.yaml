# Source: config/intent_map.yaml
# Logic: Maps Router Intents to Handlers

# A. 邏輯意圖 (Logic Intents) - 需要 Python 運算
logic_intents:
  SENSITIVE:
    handler: "reject"          # 直接拒絕，不進 LLM
    response: "抱歉，我們專注在桌遊話題上呦！有什麼遊戲問題可以問我～"
  
  RULES:
    handler: "cloud_rag"       # 呼叫 Gemini + RAG
    task: "explain_rules"
  
  CASUAL_CHAT:
    handler: "local_llm"       # 呼叫 Qwen Persona
    task: "casual_chat"

# B. 內容意圖 (Content Intents) - 直接查 store_info.yaml
# 注意：這裡對應的是 store_info.yaml 的第一層 Key
content_map:
  # 精準分類 (Layer 1 優先命中，Layer 2 也能判斷)
  STORE_WIFI:       ["STORE_WIFI"]
  STORE_TOILET:     ["STORE_TOILET"]
  STORE_ENTRY_FEE:  ["STORE_ENTRY_FEE"]
  STORE_HOURS:      ["STORE_HOURS"]
  STORE_FOOD:       ["STORE_FOOD"]
  STORE_INTRO:      ["STORE_INTRO"]
  STORE_LOCATION:   ["STORE_ADDRESS"]
  STORE_PHONE:      ["STORE_PHONE"]

  # [NEW] 通用引導分類 (Layer 2 兜底使用)
  # 當 4B 無法明確判斷，或問題涉及價格/餐點/商品等需櫃台確認的內容
  STORE_GUIDE:     ["STORE_GUIDE"]

  UNKNOWN:         ["UNKNOWN_FALLBACK"]

# C. 兜底策略
fallback:
  default_intent: "CASUAL_CHAT"
  min_confidence: 0.6